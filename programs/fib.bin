v2.0 raw
#.constant
# OutPort, 0xFF000000
#li
# sp, 0x000ff000
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#lui
# sp, 0x000ff000
#ori
# sp, sp, 0x000ff000
#li
# s0, 1
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#lui
# s0, 1
#ori
# s0, s0, 1
######### top:
#add
# s3, s0, s1
#mv
# a0, s0
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#addi
# a0, s0, 0
#mv
# s1, s0
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#addi
# s1, s0, 0
#mv
# s0, s3
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#addi
# s0, s3, 0
#li
# a1, 8
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#lui
# a1, 8
#ori
# a1, a1, 8
#jal
# ra, out_hex
#jal
# ra, newline
#j
# top
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#jal
# r0, top
######### newline:
#sw
# sp, ra, -4
#addi
# sp, sp, -4
#li
# a0, 10
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#lui
# a0, 10
#ori
# a0, a0, 10
#jal
# ra, out_char
#lw
# ra, sp, 0
#addi
# sp, sp, 4
#ret
# 
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#jalr
# r0, r1, 0
######### out_string:
#sw
# sp, ra, -4
#addi
# sp, sp, -4
#mv
# t1, a0
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#addi
# t1, a0, 0
######### out_string_charloop:
#lb
# t2, t1, 0
#beqz
# t2, out_string_end
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#beq
# t2, r0, out_string_end
#mv
# a0, t2
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#addi
# a0, t2, 0
#jal
# ra, out_char
#addi
# t1, t1, 1
#j
# out_string_charloop
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#jal
# r0, out_string_charloop
######### out_string_end:
#lw
# ra, sp, 0
#addi
# sp, sp, 4
#ret
# 
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#jalr
# r0, r1, 0
######### out_hex:
#li
# t3, 'HexTable
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#lui
# t3, 'HexTable
#ori
# t3, t3, 'HexTable
#mv
# t5, a0
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#addi
# t5, a0, 0
#sw
# sp, ra, -4
#addi
# sp, sp, -4
######### out_hex_character:
#addi
# a1, a1, -1
#slli
# t2, a1, 2
#srl
# t4, t5, t2
#andi
# t4, t4, 0xF
#add
# t4, t4, t3
#lb
# a0, t4, 0
#jal
# ra, out_char
#bne
# a1, zero, out_hex_character
######### out_hex_end:
#lw
# ra, sp, 0
#addi
# sp, sp, 4
#ret
# 
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#jalr
# r0, r1, 0
######### out_char:
#li
# t0, OutPort
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#lui
# t0, OutPort
#ori
# t0, t0, OutPort
#sb
# t0, a0, 0
#ret
# 
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#jalr
# r0, r1, 0
######### HexTable:
#.stringu
# "0123456789ABCDEF"
#.byte
# 48
#.byte
# 49
#.byte
# 50
#.byte
# 51
#.byte
# 52
#.byte
# 53
#.byte
# 54
#.byte
# 55
#.byte
# 56
#.byte
# 57
#.byte
# 65
#.byte
# 66
#.byte
# 67
#.byte
# 68
#.byte
# 69
#.byte
# 70
# 4278190080
# 2,1044480
# 2,2,1044480
# 8,1
# 8,8,1
# 19,8,9
# 10,8,0
# 9,8,0
# 8,19,0
# 11,8
# 11,11,8
# 1,92
# 1,8
# 0,-32
# 2,1,-4
# 2,2,-4
# 10,10
# 10,10,10
# 1,128
# 1,2,0
# 2,2,4
# 0,1,0
# 2,1,-4
# 2,2,-4
# 6,10,0
# 7,6,0
# 7,0,20
# 10,7,0
# 1,88
# 6,6,1
# 0,-20
# 1,2,0
# 2,2,4
# 0,1,0
# 28,212
# 28,28,212
# 30,10,0
# 2,1,-4
# 2,2,-4
# 11,11,-1
# 7,11,2
# 29,30,7
# 29,29,15
# 29,29,28
# 10,29,0
# 1,20
# 11,0,-28
# 1,2,0
# 2,2,4
# 0,1,0
# 5,4278190080
# 5,5,4278190080
# 5,10,0
# 0,1,0
# 48
# 49
# 50
# 51
# 52
# 53
# 54
# 55
# 56
# 57
# 65
# 66
# 67
# 68
# 69
# 70
37
f1
f
00
13
61
1
00
37
4
00
00
13
64
14
00
b3
9
94
00
13
5
4
00
93
4
4
00
13
84
9
00
b7
5
00
00
93
e5
85
00
ef
00
c0
5
ef
00
80
00
6f
f0
1f
fe
23
2e
11
fe
13
1
c1
ff
37
5
00
00
13
65
a5
00
ef
00
00
8
83
20
1
00
13
1
41
00
67
80
00
00
23
2e
11
fe
13
1
c1
ff
13
3
5
00
83
3
3
00
63
8a
3
00
13
85
3
00
ef
00
80
5
13
3
13
00
6f
f0
df
fe
83
20
1
00
13
1
41
00
67
80
00
00
37
e
00
00
13
6e
4e
d
13
f
5
00
23
2e
11
fe
13
1
c1
ff
93
85
f5
ff
93
93
25
00
b3
5e
7f
00
93
fe
fe
00
b3
8e
ce
1
3
85
e
00
ef
00
40
1
e3
92
5
fe
83
20
1
00
13
1
41
00
67
80
00
00
b7
2
00
ff
93
e2
2
00
23
80
a2
00
67
80
00
00
30
31
32
33
34
35
36
37
38
39
41
42
43
44
45
46
